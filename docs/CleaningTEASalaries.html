<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Cleaning TEA Salaries – tea-teachers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-dcc7d9e706e4adfbab8e3d6c7c60bab2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./CleaningTEASalaries.html">Cleaning TEA Salaries</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">tea-teachers</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CleaningTEASalaries.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Cleaning TEA Salaries</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CleaningEnrollment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cleaning TEA Enrollment</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./CleaningCPI-ALICE.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Cleaning CPI and ALICE</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AnalysisInitial.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Initial Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Map1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TEA District Types Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Map2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bill Categories Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Map3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Difference in Salary and Cost of Living Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AnalysisRegion20.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Region 20 Analysis</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./AnalysisNCES.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NCES District Type Analysis</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#import-all-the-salary-files" id="toc-import-all-the-salary-files" class="nav-link" data-scroll-target="#import-all-the-salary-files">Import all the salary files</a></li>
  <li><a href="#district-types-and-join" id="toc-district-types-and-join" class="nav-link" data-scroll-target="#district-types-and-join">District Types and Join</a></li>
  <li><a href="#export" id="toc-export" class="nav-link" data-scroll-target="#export">Export</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cleaning TEA Salaries</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="setup" class="level2">
<h2 class="anchored" data-anchor-id="setup">Setup</h2>
<p>Importing the libraries we need.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="import-all-the-salary-files" class="level2">
<h2 class="anchored" data-anchor-id="import-all-the-salary-files">Import all the salary files</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>salary_files_list <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data-raw"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">".csv"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">full.names =</span> T</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>salary_files_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "data-raw/Staff Salary FTE Report_Statewide_Districts_2014-2015.csv"
 [2] "data-raw/Staff Salary FTE Report_Statewide_Districts_2015-2016.csv"
 [3] "data-raw/Staff Salary FTE Report_Statewide_Districts_2016-2017.csv"
 [4] "data-raw/Staff Salary FTE Report_Statewide_Districts_2017-2018.csv"
 [5] "data-raw/Staff Salary FTE Report_Statewide_Districts_2018-2019.csv"
 [6] "data-raw/Staff Salary FTE Report_Statewide_Districts_2019-2020.csv"
 [7] "data-raw/Staff Salary FTE Report_Statewide_Districts_2020-2021.csv"
 [8] "data-raw/Staff Salary FTE Report_Statewide_Districts_2021-2022.csv"
 [9] "data-raw/Staff Salary FTE Report_Statewide_Districts_2022-2023.csv"
[10] "data-raw/Staff Salary FTE Report_Statewide_Districts_2023-2024.csv"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>import_files <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> file_name <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">read_csv</span>(     <span class="co">#read csv first and skip the TEA heading lines</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">skip =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fte_count =</span> <span class="fu">as.numeric</span>(fte_count),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">total_base_pay =</span> <span class="fu">as.numeric</span>(total_base_pay),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">average_base_pay =</span> <span class="fu">as.numeric</span>(average_base_pay))</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="ot">&lt;-</span> salary_files_list <span class="sc">|&gt;</span> <span class="fu">set_names</span>(basename) <span class="sc">|&gt;</span> </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(import_files) <span class="sc">|&gt;</span>  <span class="co">#map on our new function</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_rbind</span>(<span class="at">names_to =</span> <span class="st">"source"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 39350 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): Region, County, District, District Name, Charter Status, Staff_Cat...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 3 warnings in `mutate()`.
The first warning was:
ℹ In argument: `fte_count = as.numeric(fte_count)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.
One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 39096 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): Region, County, District, District Name, Charter Status, Staff_Cat...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 3 warnings in `mutate()`.
The first warning was:
ℹ In argument: `fte_count = as.numeric(fte_count)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.
One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 39429 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 51617 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): Region, County, District, District Name, Charter Status, Staff_Cat...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 3 warnings in `mutate()`.
The first warning was:
ℹ In argument: `fte_count = as.numeric(fte_count)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.
One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 52126 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 52224 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 52500 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 53092 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (10): Region, County, District, District Name, Charter Status, Staff_Cat...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 3 warnings in `mutate()`.
The first warning was:
ℹ In argument: `fte_count = as.numeric(fte_count)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.
One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 53521 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 53839 Columns: 10
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): Region, County, District, District Name, Charter Status, Staff_Cate...
dbl (3): FTE Count, Total Base Pay, Average Base Pay

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>tea_salaries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 486,794 × 11
   source     region county district district_name charter_status staff_category
   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
 1 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 2 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 3 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 4 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 5 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 6 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 7 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 8 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 9 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
10 Staff Sal… 07     ANDER… 001902   CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
# ℹ 486,784 more rows
# ℹ 4 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;</code></pre>
</div>
</div>
<p>I know that the end of each file has weird extra lines with extra text. Let’s remove all of those lines that don’t have an actual region. Then we check that the files combined correctly by looking at the end of the datatset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="ot">&lt;-</span> tea_salaries <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">str_length</span>(region) <span class="sc">&lt;=</span> <span class="dv">2</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="sc">|&gt;</span> <span class="fu">tail</span>(<span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 11
   source     region county district district_name charter_status staff_category
   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
 1 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… SUPPORT STAFF 
 2 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… SUPPORT STAFF 
 3 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… SUPPORT STAFF 
 4 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… SUPPORT STAFF 
 5 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… ADMINISTRATIV…
 6 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… ADMINISTRATIV…
 7 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… ADMINISTRATIV…
 8 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… ADMINISTRATIV…
 9 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… ADMINISTRATIV…
10 Staff Sal… 07     ANGEL… 003906   ZAVALLA ISD   TRADITIONAL I… &lt;NA&gt;          
# ℹ 40 more rows
# ℹ 4 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Another check that the files combined correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="sc">|&gt;</span> <span class="fu">group_by</span>(district) <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,256 × 2
   district total
   &lt;chr&gt;    &lt;int&gt;
 1 001902     380
 2 001903     332
 3 001904     323
 4 001906     282
 5 001907     452
 6 001908     358
 7 001909     291
 8 002901     520
 9 003801     385
10 003902     424
# ℹ 1,246 more rows</code></pre>
</div>
</div>
<p>Another check that the files combined correctly.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>tea_salaries<span class="sc">$</span>staff_category <span class="sc">|&gt;</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "TEACHING STAFF"         "SUPPORT STAFF"          "ADMINISTRATIVE STAFF"  
[4] NA                       "PARAPROFESSIONAL STAFF" "AUXILIARY"             
[7] "AUXILIARY STAFF"        "TRADITIONAL ISD/CSD"   </code></pre>
</div>
</div>
<p>“TRADITIONAL ISD/CSD” shouldn’t be in there. Let’s see where that error is occurring.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="sc">|&gt;</span> <span class="fu">filter</span>(staff_category <span class="sc">==</span> <span class="st">"TRADITIONAL ISD/CSD"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 11
  source      region county district district_name charter_status staff_category
  &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
1 Staff Sala… 05     NEWTO… 176901   "TEXAS EDUCA… &lt;NA&gt;           TRADITIONAL I…
# ℹ 4 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;</code></pre>
</div>
</div>
<p>It’s only one row…and it looks like it might be missing data. Let’s look at all the rows for this district.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>tea_salaries <span class="sc">|&gt;</span> <span class="fu">filter</span>(district <span class="sc">==</span> <span class="st">"176901"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 307 × 11
   source     region county district district_name charter_status staff_category
   &lt;chr&gt;      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
 1 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 2 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 3 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 4 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 5 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 6 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 7 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 8 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
 9 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
10 Staff Sal… 05     NEWTO… 176901   BURKEVILLE I… TRADITIONAL I… TEACHING STAFF
# ℹ 297 more rows
# ℹ 4 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;</code></pre>
</div>
</div>
<p>These look normal…we only want staff_category that is “TEACHING STAFF” anyways so we can disregard that weird row since it has “ADMINISTRATIVE STAFF”.</p>
<p>Now we want to pull the school year from the file name (source column). Then we will get rid of that source column cause we don’t need it anymore and then I need ot factor the years so R understands that the strings have an order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>teaching_staff_salaries <span class="ot">&lt;-</span> tea_salaries <span class="sc">|&gt;</span> <span class="fu">filter</span>(staff_category <span class="sc">==</span> <span class="st">"TEACHING STAFF"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">school_year =</span> <span class="fu">substr</span>(source, <span class="at">start =</span> (<span class="fu">nchar</span>(source) <span class="sc">-</span> <span class="dv">13</span> <span class="sc">+</span> <span class="dv">1</span>), <span class="at">stop =</span> <span class="fu">nchar</span>(source)<span class="sc">-</span><span class="dv">4</span>))</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>teaching_staff_salaries <span class="ot">&lt;-</span> teaching_staff_salaries <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>source) <span class="sc">|&gt;</span> </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">school_year =</span> <span class="fu">factor</span>(school_year, </span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"2014-2015"</span>, <span class="st">"2015-2016"</span>, <span class="st">"2016-2017"</span>, <span class="st">"2017-2018"</span>, <span class="st">"2018-2019"</span>, <span class="st">"2019-2020"</span>, <span class="st">"2020-2021"</span>, <span class="st">"2021-2022"</span>, <span class="st">"2022-2023"</span>, <span class="st">"2023-2024"</span>)))</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(teaching_staff_salaries)[<span class="fu">colnames</span>(teaching_staff_salaries) <span class="sc">==</span> <span class="st">"district"</span>] <span class="ot">&lt;-</span> <span class="st">"district_number"</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>teaching_staff_salaries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 160,221 × 11
   region county     district_number district_name charter_status staff_category
   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;         
 1 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 2 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 3 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 4 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 5 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 6 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 7 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 8 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
 9 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
10 07     ANDERSON … 001902          CAYUGA ISD    TRADITIONAL I… TEACHING STAFF
# ℹ 160,211 more rows
# ℹ 5 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;, school_year &lt;fct&gt;</code></pre>
</div>
</div>
</section>
<section id="district-types-and-join" class="level2">
<h2 class="anchored" data-anchor-id="district-types-and-join">District Types and Join</h2>
<p>Let’s read in the district types spreadsheet. We also want to clean the names and then change the first column to be district_name so it doesn’t conflict when we join it later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>district_types <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data-raw/district-type2223.xlsx"</span>, <span class="at">sheet =</span> <span class="st">"2223_Data"</span>) <span class="sc">|&gt;</span> <span class="fu">clean_names</span>()</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(district_types)[<span class="fu">colnames</span>(district_types) <span class="sc">==</span> <span class="st">'district'</span>] <span class="ot">&lt;-</span> <span class="st">'district_name'</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>district_types</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,217 × 7
   district_name               district_number tea_district_type tea_description
   &lt;chr&gt;                       &lt;chr&gt;           &lt;chr&gt;             &lt;chr&gt;          
 1 A W BROWN LEADERSHIP ACADE… 057816          I                 Charter Schools
 2 A+ ACADEMY                  057829          I                 Charter Schools
 3 A+ UNLIMITED POTENTIAL      101871          I                 Charter Schools
 4 ABBOTT ISD                  109901          H                 Rural          
 5 ABERNATHY ISD               095901          H                 Rural          
 6 ABILENE ISD                 221901          C                 Other Central …
 7 ACADEMY FOR ACADEMIC EXCEL… 057814          I                 Charter Schools
 8 ACADEMY ISD                 014901          G                 Non-metropolit…
 9 ACADEMY OF ACCELERATED LEA… 101810          I                 Charter Schools
10 ACADEMY OF DALLAS           057810          I                 Charter Schools
# ℹ 1,207 more rows
# ℹ 3 more variables: nces_district_type &lt;chr&gt;, nces_description &lt;chr&gt;,
#   charter_school_y_n &lt;chr&gt;</code></pre>
</div>
</div>
<p>Now I am going to join the district type data frame with the district salary data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>salaries_district_types <span class="ot">&lt;-</span> teaching_staff_salaries <span class="sc">|&gt;</span>  <span class="fu">left_join</span>(district_types, <span class="at">by =</span> <span class="st">"district_number"</span>) </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>salaries_district_types </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 160,221 × 17
   region county   district_number district_name.x charter_status staff_category
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;         
 1 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 2 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 3 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 4 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 5 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 6 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 7 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 8 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 9 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
10 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
# ℹ 160,211 more rows
# ℹ 11 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;, school_year &lt;fct&gt;, district_name.y &lt;chr&gt;,
#   tea_district_type &lt;chr&gt;, tea_description &lt;chr&gt;, nces_district_type &lt;chr&gt;,
#   nces_description &lt;chr&gt;, charter_school_y_n &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>salaries_district_types <span class="sc">|&gt;</span> <span class="fu">count</span>(district_number, district_name.x, district_name.y) <span class="sc">|&gt;</span> <span class="fu">count</span>(district_number, <span class="at">sort =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,255 × 2
   district_number     n
   &lt;chr&gt;           &lt;int&gt;
 1 227824              4
 2 015830              3
 3 004901              2
 4 015805              2
 5 015806              2
 6 015808              2
 7 015815              2
 8 015822              2
 9 015825              2
10 015828              2
# ℹ 1,245 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>salaries_district_types <span class="sc">|&gt;</span> <span class="fu">filter</span>(district_number <span class="sc">==</span> <span class="st">"227824"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 126 × 17
   region county   district_number district_name.x charter_status staff_category
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;         
 1 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 2 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 3 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 4 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 5 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 6 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 7 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 8 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
 9 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
10 13     TRAVIS … 227824          THE EAST AUSTI… OPEN ENROLLME… TEACHING STAFF
# ℹ 116 more rows
# ℹ 11 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;, school_year &lt;fct&gt;, district_name.y &lt;chr&gt;,
#   tea_district_type &lt;chr&gt;, tea_description &lt;chr&gt;, nces_district_type &lt;chr&gt;,
#   nces_description &lt;chr&gt;, charter_school_y_n &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>salaries_district_types <span class="ot">&lt;-</span> salaries_district_types <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">end_year =</span> <span class="fu">substr</span>(school_year, <span class="at">start =</span> <span class="dv">6</span>, <span class="at">stop =</span> <span class="dv">9</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>salaries_district_types</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 160,221 × 18
   region county   district_number district_name.x charter_status staff_category
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;          &lt;chr&gt;         
 1 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 2 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 3 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 4 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 5 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 6 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 7 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 8 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
 9 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
10 07     ANDERSO… 001902          CAYUGA ISD      TRADITIONAL I… TEACHING STAFF
# ℹ 160,211 more rows
# ℹ 12 more variables: staff &lt;chr&gt;, fte_count &lt;dbl&gt;, total_base_pay &lt;dbl&gt;,
#   average_base_pay &lt;dbl&gt;, school_year &lt;fct&gt;, district_name.y &lt;chr&gt;,
#   tea_district_type &lt;chr&gt;, tea_description &lt;chr&gt;, nces_district_type &lt;chr&gt;,
#   nces_description &lt;chr&gt;, charter_school_y_n &lt;chr&gt;, end_year &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="export" class="level2">
<h2 class="anchored" data-anchor-id="export">Export</h2>
<p>I want to export the above dataframe to use for analysis in my next notebook.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>salaries_district_types <span class="sc">|&gt;</span> <span class="fu">write_rds</span>(<span class="st">"data-processed/teaching_staff_salaries.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>